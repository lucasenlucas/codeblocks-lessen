// volledige inhoud is hetzelfde, behalve deze JS-functie-update onderaan:

// voeg dit toe binnen je <script type="module"> tag, vlak voor het einde

// Eventdelegatie voor edit-iconen in popup
    document.addEventListener("click", async (e) => {
      if (e.target.classList.contains("edit-icon")) {
        const container = e.target.parentElement;
        const field = container.querySelector("span[contenteditable]");
        const label = container.querySelector("strong").textContent.replace(":", "").toLowerCase();
        const nieuweWaarde = prompt(`Nieuwe waarde voor ${label}`, field.textContent);
        if (!nieuweWaarde) return;
        field.textContent = nieuweWaarde;

        // Simpele key mapping
        const updateKey = label.includes("naam") ? "name" : label.includes("organisatie") ? "organization" : "role";

        // Vind gebruiker op naam en update
        const naam = document.querySelector(".popup-content h2").textContent;
        const snapshot = await getDocs(collection(db, "users"));
        snapshot.forEach(async (docSnap) => {
          const data = docSnap.data();
          if (data.name === naam) {
            const docRef = docSnap.ref;
            await docRef.update({ [updateKey]: nieuweWaarde });
            alert(`${updateKey} bijgewerkt!`);
          }
        });
      }
    });
