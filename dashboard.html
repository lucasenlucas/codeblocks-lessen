<aside class="sidebar">
  <h2>Codeblocks</h2>
  <a class="menu-item" href="dashboard.html">Dashboard</a>
  <a class="menu-item" href="profiel.html">Profiel</a>
  <a class="menu-item" href="instellingen.html">Instellingen</a>
  <div id="adminTab" style="display:none;">
    <a class="menu-item" href="bh.html">Beheer</a>
  </div>
  <div class="menu-item" id="logout">Log uit</div>
</aside>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyA0LcMrF62nVwXMtJFpDcPB7bviEZl7Vuk",
    authDomain: "codeblocks-app.firebaseapp.com",
    projectId: "codeblocks-app",
    storageBucket: "codeblocks-app.firebasestorage.app",
    messagingSenderId: "341679011888",
    appId: "1:341679011888:web:125666a5a4b0ff9701d5f5"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  onAuthStateChanged(auth, async (user) => {
    if (!user) return location.href = "index.html";

    const userDoc = await getDoc(doc(db, "users", user.uid));
    const role = userDoc.exists() ? userDoc.data().role : "user";
    if (role === "admin") {
      document.getElementById("adminTab").style.display = "block";
    }
  });

  document.getElementById("logout").addEventListener("click", () => {
    signOut(auth).then(() => location.href = "index.html");
  });
</script>
